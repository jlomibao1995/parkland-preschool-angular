<app-loading-spinner [httpLoading]="loading"></app-loading-spinner>
<app-success-error-dialog [message]="message" [success]="success" (messageChanged)="messageChangedHandler($event)">
</app-success-error-dialog>

<div class="display-6 my-3 text-center">Complete Registration</div>
<div class="container card my-4" *ngIf="childId != null">

    <div *ngIf="currentPage == 1">
        <app-registration-info [childId]="childId" (goBack)="cancel()" (infoComplete)="next()">
        </app-registration-info>
    </div>

    <div *ngIf="currentPage == 2">
        <div class="progress my-4">
            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 100%"
                aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
        </div>

        <h4>Review Registration Details</h4>

        <app-classroom-info [classroom]="registration.classroom"></app-classroom-info>

        <app-child-info [childId]="childId"></app-child-info>

        <div class="row my-4">
            <div class="col form-group">
                <a class="btn btn-dark btn-md px-4" href="/myaccount">Cancel</a>
            </div>
            <div class="col-auto">
                <button class="btn btn-outline-secondary px-4" (click)="previous()">Prev</button>
            </div>
            <div class="col-auto form-group">
                <input class="btn btn-primary px-4" (click)="next()" value="Continue">
            </div>
        </div>
    </div>
</div>

<div class="container card" *ngIf="currentPage == 3">
    <div class="card-body text-center">
        <h2 class="display-3 text-success">Almost there!</h2>

        <h2 class="lead">To complete your registration and save a spot for your child please pay the registration fee</h2>
        <h2 class="lead">If you wish to pay another time just visit the <a href="/myaccount">My Account</a> page to access this registration</h2>
        <small>Until the registration fee is received the child has no spot for the class</small>

        <app-registration-details [registrationId]="registration.id"></app-registration-details>

        <div class="row m-5">
            <div class="col">
                <a class="btn btn-dark btn-md px-4" href="/myaccount">Return to Account</a>
            </div>

            <div class="col">
                <button class="btn btn-outline-success" (click)="payRegistrationFee()">Pay Registration Fee</button>
            </div>
        </div>

    </div>
</div>